/**
 * MOBILE-SPECIFIC OPTIMIZATIONS
 * Ultra-fast, smooth experience on all mobile devices
 */

/* ============================================
   MOBILE DEVICE OPTIMIZATIONS
   ============================================ */

.mobile-device {
  /* Faster animations */
  --animation-duration: 0.2s;
  --transition-duration: 0.2s;
}

.mobile-device * {
  animation-duration: var(--animation-duration) !important;
  transition-duration: var(--transition-duration) !important;
}

.mobile-device .backdrop-blur-xl,
.mobile-device .backdrop-blur-lg {
  /* Reduce blur for better performance */
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}

/* ============================================
   LOW-END DEVICE OPTIMIZATIONS
   ============================================ */

.low-end-device {
  /* Minimal animations */
  --animation-duration: 0.1s;
  --transition-duration: 0.1s;
}

.low-end-device * {
  /* Disable expensive effects */
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: none !important;
  text-shadow: none !important;
}

.low-end-device .backdrop-blur-xl,
.low-end-device .backdrop-blur-lg,
.low-end-device .backdrop-blur-md {
  /* Solid background instead of blur */
  background: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: none !important;
}

.low-end-device .glass,
.low-end-device .glass-card {
  /* Solid glass effect */
  background: rgba(15, 15, 15, 0.95) !important;
  backdrop-filter: none !important;
}

/* ============================================
   SLOW NETWORK OPTIMIZATIONS
   ============================================ */

.slow-network {
  /* Disable background images */
  background-image: none !important;
}

.slow-network img {
  /* Lower quality images */
  image-rendering: auto;
}

.slow-network .backdrop-blur-xl,
.slow-network .backdrop-blur-lg {
  /* No blur on slow networks */
  backdrop-filter: none !important;
  background: rgba(0, 0, 0, 0.95) !important;
}

/* ============================================
   LOW BATTERY OPTIMIZATIONS
   ============================================ */

.low-battery {
  /* Minimal animations to save battery */
  --animation-duration: 0.05s;
}

.low-battery * {
  animation: none !important;
  transition: none !important;
}

.low-battery .backdrop-blur-xl,
.low-battery .backdrop-blur-lg {
  backdrop-filter: none !important;
  background: rgba(0, 0, 0, 0.95) !important;
}

/* ============================================
   TOUCH OPTIMIZATIONS
   ============================================ */

@media (hover: none) and (pointer: coarse) {
  /* Touch device optimizations */
  
  /* Larger touch targets */
  button,
  a,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 0.75rem 1rem;
  }
  
  /* Remove hover effects */
  *:hover {
    transform: none !important;
  }
  
  /* Instant feedback on touch */
  button:active,
  a:active,
  [role="button"]:active {
    opacity: 0.7;
    transform: scale(0.98);
  }
}

/* ============================================
   MOBILE LANDSCAPE OPTIMIZATIONS
   ============================================ */

@media (max-height: 500px) and (orientation: landscape) {
  /* Compact layout for landscape */
  .py-12 { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
  .py-16 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
  .py-20 { padding-top: 2.5rem !important; padding-bottom: 2.5rem !important; }
  
  /* Smaller text in landscape */
  h1 { font-size: 2rem !important; }
  h2 { font-size: 1.5rem !important; }
  
  /* Compact navbar */
  nav, header {
    min-height: 56px !important;
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }
}

/* ============================================
   MOBILE PORTRAIT OPTIMIZATIONS
   ============================================ */

@media (max-width: 480px) and (orientation: portrait) {
  /* Optimize for small screens */
  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  /* Smaller gaps */
  .gap-8 { gap: 1rem !important; }
  .gap-6 { gap: 0.75rem !important; }
  
  /* Compact cards */
  .glass-card,
  .card {
    padding: 1rem !important;
  }
}

/* ============================================
   TABLET OPTIMIZATIONS
   ============================================ */

@media (min-width: 768px) and (max-width: 1024px) {
  /* Tablet-specific optimizations */
  .container {
    max-width: 90%;
  }
  
  /* Optimize grid layouts */
  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* ============================================
   SAFE AREA INSETS (iPhone X+)
   ============================================ */

@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
  
  .navbar,
  header {
    padding-top: max(0.5rem, env(safe-area-inset-top));
  }
}

/* ============================================
   PREVENT OVERSCROLL
   ============================================ */

@media (max-width: 768px) {
  html,
  body {
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
  }
  
  /* Prevent pull-to-refresh */
  body {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* ============================================
   OPTIMIZE MODALS ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  [role="dialog"],
  .modal {
    max-width: 95vw !important;
    max-height: 90vh !important;
    margin: 1rem !important;
  }
  
  /* Full-screen modals on small screens */
  @media (max-width: 480px) {
    [role="dialog"],
    .modal {
      max-width: 100vw !important;
      max-height: 100vh !important;
      margin: 0 !important;
      border-radius: 0 !important;
    }
  }
}

/* ============================================
   OPTIMIZE FORMS ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  input,
  textarea,
  select {
    /* Prevent zoom on focus */
    font-size: 16px !important;
    
    /* Better touch targets */
    min-height: 44px;
    padding: 0.75rem;
  }
  
  /* Stack form elements */
  .form-row {
    flex-direction: column !important;
  }
}

/* ============================================
   OPTIMIZE TABLES ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Responsive table */
  .responsive-table {
    font-size: 0.875rem;
  }
  
  .responsive-table th,
  .responsive-table td {
    padding: 0.5rem !important;
  }
}

/* ============================================
   OPTIMIZE NAVIGATION ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  /* Mobile menu */
  .mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9999;
    background: rgba(0, 0, 0, 0.98);
    backdrop-filter: blur(10px);
  }
  
  /* Smooth menu transitions */
  .mobile-menu-enter {
    opacity: 0;
    transform: translateX(-100%);
  }
  
  .mobile-menu-enter-active {
    opacity: 1;
    transform: translateX(0);
    transition: all 0.3s ease-out;
  }
  
  .mobile-menu-exit {
    opacity: 1;
    transform: translateX(0);
  }
  
  .mobile-menu-exit-active {
    opacity: 0;
    transform: translateX(-100%);
    transition: all 0.3s ease-in;
  }
}

/* ============================================
   OPTIMIZE IMAGES ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  img {
    /* Faster image loading */
    loading: lazy;
    decoding: async;
  }
  
  /* Responsive images */
  img:not([width]):not([height]) {
    max-width: 100%;
    height: auto;
  }
}

/* ============================================
   REDUCE MOTION ON MOBILE
   ============================================ */

@media (max-width: 768px) and (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}

/* ============================================
   OPTIMIZE SCROLLING ON MOBILE
   ============================================ */

@media (max-width: 768px) {
  /* Smooth momentum scrolling */
  .scroll-container,
  [data-scroll="true"] {
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: y proximity;
  }
  
  /* Snap points for sections */
  section {
    scroll-snap-align: start;
  }
}
